---
title: "正己逆向笔记"
date: 2026-01-05 11:11:37
draft: false
categories: ["安卓逆向"]
tags: ["安卓逆向"]
summary: "逆向学习学习"
typora-root-url: ./..\..\..\static
---

> ## 第一课

### 一、安装雷电模拟器

![image-20260105111335072](/images/image-20260105111335072.png)

### 二、配置ROOT权限

安装好雷电模拟器后在设置中开启root。

### 三、安装脸谱

![image-20260105114753251](/images/image-20260105114753251.png)

1、安装面具，需要匹配虚拟机版本，如果只有一个选项，退出面具重进就行

![image-20260105131019946](/images/image-20260105131019946.png)

2、安装完成后将面具中的Zygisk选项开启

![image-20260105124648907](/images/image-20260105124648907.png)

3、安装模块

在github上下载![image-20260105131113019](/images/image-20260105131113019.png)

在面具模块中选择安装即可

4、无法共享文件

![image-20260118103008217](/images/image-20260118103008217.png)

> ## 第二课：汉化

1、找到带汉化字符

![image-20260105163538292](/images/image-20260105163538292.png)

2、安装界面分析工具，提取待汉化字符

![image-20260105163628249](/images/image-20260105163628249.png)

3、提取字符，点击小虫子

4、MT管理器搜索字符，并替换





> ## 第三课：smail代码及jadx-gui使用

1、smail代码片段赏析

```java

.method private static final onCreate$lambda-2(Lkotlin/jvm/internal/Ref$IntRef;Lcom/zj/wuaipojie/ui/ChallengeSecond;Landroid/widget/ImageView;Landroid/widget/ImageView;Landroid/widget/ImageView;Landroid/view/View;)Z
    
    .registers 7

    .line 33
    iget p0, p0, Lkotlin/jvm/internal/Ref$IntRef;->element:I

    const/4 p5, 0x1

    const/16 v0, 0xa

    if-ge p0, v0, :cond_15

    .line 34
    move-object p0, p1

    check-cast p0, Landroid/content/Context;

    const-string v0, "\u8bf7\u5148\u83b7\u53d610\u4e2a\u786c\u5e01\u54e6"

    check-cast v0, Ljava/lang/CharSequence;

    invoke-static {p0, v0, p5}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;

    move-result-object p0

    invoke-virtual {p0}, Landroid/widget/Toast;->show()V

    .line 36
    :cond_15
    invoke-virtual {p1}, Lcom/zj/wuaipojie/ui/ChallengeSecond;->isvip()Z

    move-result p0

    if-eqz p0, :cond_43

    .line 37
    check-cast p1, Landroid/content/Context;

    const-string p0, "\u5f53\u524d\u5df2\u7ecf\u662f\u5927\u4f1a\u5458\u4e86\u54e6\uff01"

    check-cast p0, Ljava/lang/CharSequence;

    invoke-static {p1, p0, p5}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;

    move-result-object p0

    invoke-virtual {p0}, Landroid/widget/Toast;->show()V

    const p0, 0x7f0d0018

    .line 38
    invoke-virtual {p2, p0}, Landroid/widget/ImageView;->setImageResource(I)V

    const p0, 0x7f0d0008

    .line 39
    invoke-virtual {p3, p0}, Landroid/widget/ImageView;->setImageResource(I)V

    const p0, 0x7f0d000a

    .line 40
    invoke-virtual {p4, p0}, Landroid/widget/ImageView;->setImageResource(I)V

    .line 41
    sget-object p0, Lcom/zj/wuaipojie/util/SPUtils;->INSTANCE:Lcom/zj/wuaipojie/util/SPUtils;

    const/4 p2, 0x2

    const-string p3, "level"

    invoke-virtual {p0, p1, p3, p2}, Lcom/zj/wuaipojie/util/SPUtils;->saveInt(Landroid/content/Context;Ljava/lang/String;I)V

    goto :goto_50

    .line 44
    :cond_43
    check-cast p1, Landroid/content/Context;

    const-string p0, "\u8bf7\u5148\u5145\u503c\u5927\u4f1a\u5458\u54e6\uff01"

    check-cast p0, Ljava/lang/CharSequence;

    invoke-static {p1, p0, p5}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;

    move-result-object p0

    invoke-virtual {p0}, Landroid/widget/Toast;->show()V

    :goto_50
    return p5
.end method

```

2、jadx-gui是一款静态反编译工具，用于软件底部方便查看java和smali代码，不用于修改，修改在mt管理器中执行

![image-20260106120614947](/images/image-20260106120614947.png)

3、安装的核心破解软件用过过两次签名不一致情况，无需卸载重装

![image-20260106120905016](/images/image-20260106120905016.png)

> ## 第四课：去广告

1、通过mt管理者中Activity活动记录功能追踪弹广告关键信息

![image-20260107122047031](/images/image-20260107122047031.png)

2、通过算法助手自带功能屏蔽广告，也可通过算法助手中的日志追踪弹窗堆栈

![image-20260107122304340](/images/image-20260107122304340.png)

![image-20260107122326199](/images/image-20260107122326199.png)

3、通过开发助手中的布局查看功能定位资源位置，将其大小设为0或隐藏掉android-visibility:gone;

![Snipaste_2026-01-07_11-36-28](/images/Snipaste_2026-01-07_11-36-28.png)

![Snipaste_2026-01-07_11-38-02](/images/Snipaste_2026-01-07_11-38-02.png)

![Snipaste_2026-01-07_12-09-40](/images/Snipaste_2026-01-07_12-09-40.png)

![Snipaste_2026-01-07_12-01-54](/images/Snipaste_2026-01-07_12-01-54.png)

> ## 第五课：jeb动态调试及log插桩

1、jeb动态调试

注意adb版本要匹配

apk中开启可调式权限：android:debuggable="true"

检索：

![image-20260108215658501](/images/image-20260108215658501.png)

转java

![image-20260108215730749](/images/image-20260108215730749.png)

查看在线设备

![image-20260108215948932](/images/image-20260108215948932.png)

jeb中的adb要匹配版本且要加到系统环境变量

开启adb调试

![image-20260108220121526](/images/image-20260108220121526.png)

在jeb中点击小虫子并选择进程附加

![image-20260108220224777](/images/image-20260108220224777.png)

软件中触发断点

![image-20260108220340833](/images/image-20260108220340833.png)

![image-20260108220322940](/images/image-20260108220322940.png)

2、log插桩

将准备好的插桩dex复制到apk安装包并重命名

![image-20260108220704754](/images/image-20260108220704754.png)

老色批中勾选算法助手和apk应用

![image-20260108221412957](/images/image-20260108221412957.png)

apk中增加日志打印函数

invoke-static {对应寄存器}, Lcom/mtools/LogUtils;->v(Ljava/lang/Object;)V

算法助手中打开应用总开关及log记录，通过日志监控apk中的输出

![image-20260108221333683](/images/image-20260108221333683.png)

![image-20260108221214973](/images/image-20260108221214973.png)

> ## 第六课

1、在算法助手中监听签名日志

![image-20260109091204807](/images/image-20260109091204807.png)

![image-20260109091736563](/images/image-20260109091736563.png)

2、MT中查看包的签名信息

![image-20260109131902138](/images/image-20260109131902138.png)

![image-20260109132228752](/images/image-20260109132228752.png)

3、IO重定向：数据目录中新建files文件夹，将原包放进去

![image-20260109154059599](/images/image-20260109154059599.png)

![image-20260109154013608](/images/image-20260109154013608.png)

4、JEB中类型不对可手动修改

![image-20260109205518190](/images/image-20260109205518190.png)

> ## 第七课

1、下载androidstudio,使其连接上雷电模拟器，会自动连接

2、新建工程，选java，选groovydsl

![image-20260117171742625](/images/image-20260117171742625.png)

3、建立文件夹，将Xposed.zip复制进去，并将压缩包转为库

![image-20260117171926530](/images/image-20260117171926530.png)

4、新建asset文件夹

![image-20260117172007098](/images/image-20260117172007098.png)

5、新建hook类

![image-20260117172050452](/images/image-20260117172050452.png)

6、修改xml

![image-20260117172137831](/images/image-20260117172137831.png)

7、修改build.gradle

![image-20260117172224821](/images/image-20260117172224821.png)

8、在模拟器中打开老色批，并启用xposed模块，并勾选应用

![](/images/Snipaste_2026-01-17_17-15-47.png)

9、logcat中看日志

![image-20260117172408412](/images/image-20260117172408412.png)

10、解决AndroidStudio修改代码运行没变化没生效的问题

![image-20260118081157660](/images/image-20260118081157660.png)

![image-20260118081223755](/images/image-20260118081223755.png)

![image-20260118081248846](/images/image-20260118081248846.png)

> ## 第八课:LSP补丁apk与简单HOOK功能

1、androidstuido中打包模块



![Snipaste_2026-01-18_11-24-54](/images/Snipaste_2026-01-18_11-24-54.png)

![Snipaste_2026-01-18_11-25-08](/images/Snipaste_2026-01-18_11-25-08.png)

![Snipaste_2026-01-18_11-26-16](/images/Snipaste_2026-01-18_11-26-16.png)

![Snipaste_2026-01-18_11-29-41](/images/Snipaste_2026-01-18_11-29-41.png)

2、LSPath将打包好的模块注入的apk中，修补APK

![image-20260118135902495](/images/image-20260118135902495.png)

安装前先卸载,卸载后将刚刚Androidstudio生成的apk拖到模拟器中

![Snipaste_2026-01-18_12-31-46](/images/Snipaste_2026-01-18_12-31-46.png)

![Snipaste_2026-01-18_12-35-00](/images/Snipaste_2026-01-18_12-35-00.png)

![Snipaste_2026-01-18_12-35-11](/images/Snipaste_2026-01-18_12-35-11.png)

![Snipaste_2026-01-18_12-35-33](/images/Snipaste_2026-01-18_12-35-33.png)

![Snipaste_2026-01-18_12-35-46](/images/Snipaste_2026-01-18_12-35-46.png)



![Snipaste_2026-01-18_12-37-50](/images/Snipaste_2026-01-18_12-37-50.png)

1、简单hook功能，安装

![image-20260118140245566](/images/image-20260118140245566.png)

2、![Snipaste_2026-01-18_12-52-54](/images/Snipaste_2026-01-18_12-52-54.png)

3、![Snipaste_2026-01-18_12-58-44](/images/Snipaste_2026-01-18_12-58-44.png)

4、![Snipaste_2026-01-18_13-00-52](/images/Snipaste_2026-01-18_13-00-52.png)

5、![Snipaste_2026-01-18_13-02-37](/images/Snipaste_2026-01-18_13-02-37.png)

6、![Snipaste_2026-01-18_13-05-26](/images/Snipaste_2026-01-18_13-05-26.png)

7、![Snipaste_2026-01-18_13-06-52](/images/Snipaste_2026-01-18_13-06-52.png)

8、![Snipaste_2026-01-18_13-22-33](/images/Snipaste_2026-01-18_13-22-33.png)

9、![Snipaste_2026-01-18_13-22-43](/images/Snipaste_2026-01-18_13-22-43.png)

> ## 第九课：算法自吐与非标准加密

1、对于标准加密，用算法助手或者简单hook模块进行加密信息的截取

![Snipaste_2026-01-19_12-35-55](/images/Snipaste_2026-01-19_12-35-55.png)

2、两个关于非对称加密的网站（公钥私钥数字签名CA）

https://www.bilibili.com/video/BV15P4y1S7Jw/?spm_id_from=333.1387.favlist.content.click

**[什么是数字签名？有什么用？原理又是什么？_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1hU4y177Zq/?spm_id_from=333.1387.favlist.content.click&vd_source=e8ffc45a5da27bf9ec27430f947b7245)**

3、对于非标准加密

从反汇编代码中将算法函数扣出来，自己建立一个java工程，传参数得结果

> ## 第十课：建立JNI工程和IDA修改重新封包

1、![Snipaste_2026-01-20_08-20-44](/images/Snipaste_2026-01-20_08-20-44.png)

2、JNI C++ SO层代码与java代码位置

![image-20260120105530859](/images/image-20260120105530859.png)

1、IDA中修改汇编

![Snipaste_2026-01-20_10-41-24](/images/Snipaste_2026-01-20_10-41-24.png)

2、保存SO文件

![Snipaste_2026-01-20_10-42-18](/images/Snipaste_2026-01-20_10-42-18.png)

3、apk中so文件位置

![image-20260120105316958](/images/image-20260120105316958.png)

4、将so重新塞回apk替换原先so

5、用mt或nt重新签名安装
